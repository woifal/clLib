<!DOCTYPE html> 
<html >

<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta http-equiv="no-cache"/>
    <meta http-equiv="Expires" content="-1"/>
    <meta http-equiv="Cache-Control" content="no-cache"/>

	<title>Kurt Climbing 0408a</title> 
	<link rel="stylesheet" href="http://www.kurt-climbing.com/Joomla/STATIC/css/THEMES/20140627/app1.css" />
	<link rel="stylesheet" href="http://www.kurt-climbing.com/Joomla/STATIC/css/THEMES/20140627/jquery.mobile.structure-1.4.2.css" />
	<link rel="stylesheet" href="http://www.kurt-climbing.com/Joomla/STATIC/css/THEMES/20140627/jquery.mobile.icons.min.css" />		

    <link rel="stylesheet" href="../css/clRouteColors.css" />
    <link rel="stylesheet" href="../css/clLib.css" />
	
        <!-- phonegap integration? -->
        <script type="text/javascript" src="../js/jquery-1.8.2.js"></script>

<script>
$(document).bind("mobileinit", function () {
	//alert("AAAAAAAAAAAAAAAAAAAAAAAAAAA");
});	
</script>

        <script type="text/javascript" src="http://www.kurt-climbing.com/Joomla/STATIC/css/THEMES/20140405/jquery.mobile-1.4.2.js"></script>


        <script type="text/javascript" src="../js/clLib.js"></script>
        <script type="text/javascript" src="../js/clLib.auth.js"></script>
        <script type="text/javascript" src="../js/clLib.gradeConfig.js"></script>
        <script type="text/javascript" src="../js/clLib.localStorage.js"></script>
        <script type="text/javascript" src="../js/clLib.localStorage.indexes.js"></script>
        <script type="text/javascript" src="../js/clLib.UI.js"></script>
        <script type="text/javascript" src="../js/clLib.REST.js"></script>
        <script type="text/javascript" src="../js/clLib.PAGES.js"></script>
		
		<script type="text/javascript" src="../js/clLib.PAGES.web.js"></script>
		
        
		<script type="text/javascript" src="../js/clLib.IAP.js"></script>
        <script type="text/javascript" src="../js/clLib.UI.pageConfig.js"></script>
        

		<script type="text/javascript" src="../js/Chart.js"></script>

		
		</head> 


<body style="background-color: white !important;" >  

				
<!--
*
*
*
*
*
*							users_clLogin
*
*
*
*
*
*
*
-->
    <div 
         id="users_clLogin" data-role="page" 
         class="clPage"
         data-theme="a" 
		 style="	max-width:640px; background-color: white;"

    >



        <div 
             id="users_clLogin_mobilecontainer1" class="ui-content" role="main" 
             data-theme=""
			 style="
				 padding: 0px 0px 0px 0px; 
				 margin:  0px 0px 0px 0px;
				 background-color: white; /*#F0F0F0;*/
			 "
		 >





				<div
					style="
						abackground-color: #f5f5f5; /*#073f7c;*/
						padding-left: 0px;
						padding-top: 20px;
						margin-left: 0px;
						border: 0px solid yellow;
						width: 100%;	
					"
				>
<!--
				<div class="ui-grid-a">
    <div class="ui-block-a"><div class="ui-bar ui-bar-a" style="height:60px">Block A</div></div>
    <div class="ui-block-b"><div class="ui-bar ui-bar-a" style="height:60px">Block B</div></div>
</div>-->


					<div class="ui-grid-a">
					<div class="ui-block-a">				

						<div id="users_googleLoginButton" data-style="none">
							<img src="../files/views/assets/image/Red-signin-Long-base-44dp.png" style="padding-left: 12px; width: 295px"/>
						</div>
					</div>				
					<div class="ui-block-b">				
						<div id="users_facebookLoginButton" data-style="none">
							<img src="../files/views/assets/image/facebook_login.png" style="padding-left: 15px; width: 290px"/>
						</div>
					</div>				
					<br/>
					<div style="clear:both;"></div>
					
					<div style="width: 45%; display: inline-block; border-bottom: 3px solid #073e78; clear:both; margin-bottom: 10px;"></div>
					<div style="width: 8%; display: inline-block; text-align:center; margin-bottom: 10px;">OR</div>
					<div style="width: 45%; display: inline-block; border-bottom: 3px solid #073e78; clear:both; margin-bottom: 10px;"></div>
					
					<div class="ui-grid-a">
					<div class="ui-block-a">				
						<div id="users_clLogin_loginError"></div>

						<!-- userName -->
						<div>
							<label class="clUIElement" style="font-size: 8px;" for="users_clLogin_currentUser">User name</label>
							<input class="clTextInput" type="text" id="users_clLogin_currentUser" name="users_clLogin_currentUser"
								   value="" placeholder="Email address..." data-theme="a" tabindex="7" />
						</div>
						<!-- password -->
						<div>
							<label class="clUIElement" style="font-size: 8px;" for="users_clLogin_currentPassword">Password</label>
							<input class="clTextInput" type="password" id="users_clLogin_currentPassword" name="users_clLogin_currentPassword"
								   type="text" value="" placeholder="Password..." data-theme="a" tabindex="7" />
						</div>
						<br>
					</div>
					<div class="ui-block-b">

						<!-- Login user -->
						<div id="users_clLogin_loginButton" class="clButton clSmall">
							<div>
							<a>
								<div>
									<img src="../files/views/assets/image/img_40_40/button_check.png"></img>
								</div>
							</a>
							<span>Log in</span>
							</div>
						</div>
						<!-- Create new user -->
						<div id="users_clLogin_signupButton" class="clButton clSmall">
							<div>
							<a>
								<div>
									<img src="../files/views/assets/image/img_40_40/button_check.png"></img>
								</div>
							</a>
							<span>Register</span>
							</div>
						</div>

						<!-- Forgot password -->
						<div id="users_clLogin_forgotPwdButton" class="clButton clSmall">
							<div>
							<a>
								<div>
									<img src="../files/views/assets/image/img_40_40/button_check.png"></img>
								</div>
							</a>
							<span>Password?</span>
							</div>
						</div>

					</div>

					</div>
                </div>
		
			
		</div>

	
	</div>
<!-- @-@include('../grunt_includes/html_bodyBottom.html', {"pageName": "users_clLogin"})
-->



					<div class="clLoading clHidden"></div>
					<div class="clLoadingBg clHidden"></div>

<script>
    
            var serverSideOnlyAuth = function(authType) {
                var redirectURL = "";
                var appEntryURL = "";
                var protocol = window.location.protocol;
                var host = window.location.host;
                var path = window.location.pathname;

                //alert("document.location.href:" + document.location.href);
                //alert("protocol:" + protocol);
                //alert("host:" + host);
                //alert("path:" + path);
                if(protocol && protocol != "") {
                    appEntryURL += protocol + "//";
                }
                if(host && host != "") {
                    appEntryURL += host + "";
                }
                appEntryURL += path.substring(0, path.lastIndexOf("/"));
                appEntryURL += "/webIndex.html";
                
				appEntryURL = "http://www.kurt-climbing.com/Joomla";
				
                //redirectURL = clLib.REST.clLibServerURI + "/getOAuth2URL?authType=google&clLib.redirectURL=" + window.location.protocol + "//" + window.location.host + "/dist/index.html";
                redirectURL = clLib.REST.clLibServerURI + "/getOAuth2URL?authType=" + authType + "&clLib.redirectURL=" + appEntryURL;
                alert("changing to " + redirectURL);
//                clLib.UI.byId$("displayName", pageId).trigger("refresh.clLib");
				window.parent.document.location.href= redirectURL;

            };

            var authFunc = serverSideOnlyAuth;

            var errorFunc = function(error) {
                alert("error >" + JSON.stringify(error));
            }
            $("#users_googleLoginButton").on("click", function () {
                return authFunc("google");
            });

            $("#users_facebookLoginButton").on("click", function () {
                return authFunc("facebook");
            });

			$("#users_clLogoutButton").die("click").click(function () {
				clLib.setUserInfo({}, true);
				localStorage.setItem("currentPassword", null);
				clLib.sessionToken = "";
				clLib.PAGES.changeTo("clLib_startScreen.html");
			});
</script>
</body>

  
</html>
